- name: Install Java
  package:
    name: java-17-amazon-corretto
    state: present

- name: Clone your repo
  git:
    repo: https://github.com/dorryspears/spring-petclinic-group-project.git
    dest: /opt/spring-petclinic
    version: main

- name: Build with Maven Wrapper
  shell: ./mvnw clean package
  args:
    chdir: /opt/spring-petclinic

- name: Run the app
  shell: nohup java -jar target/*.jar > /dev/null 2>&1 &
  args:
    chdir: /opt/spring-petclinic
